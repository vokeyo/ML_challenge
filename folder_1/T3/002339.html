<HTML>
<!-- HTML file produced from "install.ipod" using ipod2html -->
<!-- "ipod2html" created by Eryq / eryq@rhine.gsfc.nasa.gov    -->
<!-- DO NOT EDIT THIS FILE DIRECTLY! Your changes will be lost! -->
<HEAD>
<TITLE>Installing it
</TITLE>
</HEAD>
<BODY link=#0000DD 
	alink=#FFCC00
	vlink=#330099
	xcolor=#006699
>
<TABLE><TR>
<TD VALIGN=BOTTOM><IMG SRC="../icons/nasalogo.gif" ALT="NASA logo" BORDER="0"></TD>
<TD VALIGN=BOTTOM><H1><FONT SIZE=2>Installation
:</FONT><BR>6.4. Installing it
</H1></TD>
</TABLE>
<A HREF="imsdesign.html"><IMG SRC="../navigator/home.gif" ALT="[Home]" BORDER="0"></A>
<A HREF="imsdesign_preflight.html"><IMG SRC="../navigator/prev.gif" ALT="[Prev]" BORDER="0"></A>
<A HREF="imsdesign-6-5.html"><IMG SRC="../navigator/next.gif" ALT="[Next]" BORDER="0"></A>
<A HREF="imsdesign_installchap.html"><IMG SRC="../navigator/up.gif" ALT="[Up]" BORDER="0"></A>
<A HREF="imsdesign_index.html"><IMG SRC="../navigator/index.gif" ALT="[Index]" BORDER="0"></A>&nbsp;&nbsp;&nbsp;
<A HREF="imsdesign_subsys.html"><IMG SRC="../navigator/subsys.gif" ALT="[Subsystems]" BORDER="0"></A>
<A HREF="imsdesign_java.html"><IMG SRC="../navigator/JavaSubSystem.gif" ALT="[Java Subsystems]" BORDER="0"></A>
<HR>
<UL>
<LI> <A HREF="imsdesign_install.html#secn-6.4.1">Step 1:  Go through the pre-flight checklist.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.2">Step 2:  Unpack distribution in ~imswww.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.3">Step 3: Unpack the support files in ~imswww

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.4">Step 4:  ``Configure'' the system.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.5">Step 5:  ``Make'' the system.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.6">Step 6:  Create symbolic links.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.7">Step 7: Generate and apply the <CODE>SETUP</CODE> file.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.8">Step 8: Transfer the valids.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.9">Step 9: Make valids file for e-mail ordering.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.10">Step 10 (Optional): Make site specific directory and files.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.11">Step 11: Set up crontab for imsstats, imscleanup, autoxfer, 
makewelcome, and (optionally) imscleanaccounts.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.12">Step 12 (Optional): Starting the custom httpd Perl script server.

</A><LI> <A HREF="imsdesign_install.html#secn-6.4.13">Step 13:  Try out the installation

</A></UL>
<HR>

<P>If you are reading this, you have probably uncompressed 
and de-tarred the distribution.  
<B>Don't do anything further until you read these directions.</B>
<P><HR>
<A NAME="secn-6.4.1"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 1:  Go through the pre-flight checklist.
</H2></A>
<P>Please go through the <A HREF="imsdesign_preflight.html">preflight checklist</A> carefully.

<P>In particular, you <I>must</I> build your HTTP server in accordance with the
instructions. You should review the pre-flight checklist when installing
or reinstalling; the requirements may have changed since your last install.
<P><HR>
<A NAME="secn-6.4.2"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 2:  Unpack distribution in ~imswww.
</H2></A>
<P>As user <CODE>imswww</CODE>, move the distribution <code>.tar.gz</code> (or <code>.tgz</code>) file 
to the <code>~imswww</code> directory, uncompress, and untar it. Like so:

<PRE>
    gzip -d distfile.tar.gz  or
    gunzip distfile.tgz
</PRE>

<PRE>
    tar -xvf distfile.tar
</PRE>
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">All files in the distribution should be owned by 
<CODE>~imswww/</CODE>.  
If you are not logged in as <CODE>~imswww</CODE>, do so now,
and bring the files over from wherever they currently are.
</BLOCKQUOTE>

<P>You should now have a directory structure like this:

<PRE>
  ~imswww/
     |
     |--- imswww-VERSION/
     :     |
           |--- bin/ ...
           |--- cgi-bin/ ...
           |--- docs/ ...
           |--- src/ ...
           |--- lib/ ... 
           :
</PRE>

<P>If this is not the first time you've done this, you may have
directories for other versions of EOS Data Gateway at the top level.
<P><HR>
<A NAME="secn-6.4.3"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 3: Unpack the support files in ~imswww
</H2></A>
<P>You need to set the support files if you don't have them from a previous
installation.

<P>As user <CODE>imswww</CODE>, move the support_files <code>.tar.gz</code> (or <code>.tgz</code>)
file to the <code>~imswww</code> directory, uncompress, and
untar it.
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">All files in the support_files directory should be owned by
<CODE>~imswww/</CODE>.
If you are not logged in as <CODE>~imswww</CODE>, do so now,
and bring the files over from wherever they currently are.
</BLOCKQUOTE>

<P>You should now have a directory structure like this:

<PRE>
  ~imswww/
     |
     |--- support_files/
     :     |
           |--- sup_files/ ...
           |--- dist_files/ ...
           :
</PRE>

<P>All EOS V0 clients, including the EOS Data Gateway, depend on a directory tree
of special supporting files. These files come in two sets.
The first set is sometimes referred to as the <CODE>"distribution files"</CODE>
found in support_file/dist_files/ is a static set of files.
The second set of files are sometimes called the <CODE>"support files"</CODE>
and sometimes called the <CODE>"valids"</CODE> and are found in support_files/sup_files.

<P><B>Be sure that imswww has read and write access to this directory and
also to the parent directory of support_files.</B>
<P><HR>
<A NAME="secn-6.4.4"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 4:  ``Configure'' the system.
</H2></A>
<P>You are now ready to give EOS Data Gateway the information it needs
to <I>compile and link</I> the gateway programs.

<P>Note: If you are building on a Solaris machine you may need to include
"/usr/ccs/bin" in your path.

<P>If you have previous version of the web gateway installed on your
system you may want to look at the <B>myconfig</B> script used to build
that version.

<P>Edit the script called <CODE>"myconfig"</CODE>, which should look like this:

<PRE>
    #!/bin/sh
    # myconfig -- invoke configure script
</PRE>

<PRE>
    ./configure \
	--with-debug \
	--verbose \
	--with-perl=/usr/local/bin/perl5.6.1 \
</PRE>

<P>As a first cut supply just the Perl path. 

<P>Change to the top-level directory of the distribution and invoke the
<CODE>configure</CODE> utility, like so:

<PRE>
    cd ~/imswww-VERSION
</PRE>

<P>Now run the myconfig script:

<PRE>
     ./myconfig 
</PRE>

<P>This may take some time, as the <CODE>configure</CODE> script will try and determine 
certain characteristics of your system: what C compiler to use, what 
functions are available, etc.  Once it is done, it will go through your 
distribution and generate certain files needed for the build (primarily 
Makefiles) from the corresponding <code>*.in</code> (configure INput) files.

<P>If at any point you think that <CODE>configure</CODE> has made an undesirable
choice, you should interrupt it and restart it, supplying the correct
values in the <CODE>"myconfig"</CODE> script.  Type:

<PRE>
    configure --help
</PRE>

<P>and look for the <CODE>--with-<I>package</I></CODE> options at the
end of the listing.  
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">If you are re-running <CODE>configure</CODE> because it guessed wrong,
make sure to delete the <code>"config.cache"</code> file... otherwise,
it may use the same cached values.
</BLOCKQUOTE>
<P><HR>
<A NAME="secn-6.4.5"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 5:  ``Make'' the system.
</H2></A>
<P>From the top-level directory of the distribution, invoke your GNU <CODE>make</CODE>
program, like so (for clarity, we will refer to it as <CODE>"make"</CODE>, but you
should use whatever command is appropriate, like <CODE>"gmake"</CODE>):

<PRE>
    cd ~/imswww-VERSION
    make install &gt;&amp; make_install.log &amp;
</PRE>

<P>This will compile the system, copy the binaries over to their appropriate 
locations, create necessary symbolic links, etc.

<P>When the make install is done, carefully read through the make_install.log
file looking for <CODE>Error</CODE> messages. Numerous <CODE>Warnings</CODE> are common and can
usually be ignored, if an error occurred then the problem must be fixed and
make install rerun. 
<BLOCKQUOTE><HR>
<IMG SRC="../icons/note.gif" ALT="NOTE!">There will be a warning during the installation of libwww-perl which implies 
that an FTP module was needed but not found. Since the EDG doesn't access any
<CODE>ftp://...</CODE> links internally, it doesn't need this module and this isn't a
problem
</BLOCKQUOTE>
<P><HR>
<A NAME="secn-6.4.6"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 6:  Create symbolic links.
</H2></A>
<P>The following links make the installation visible to the web
via the ~imswww/public_html directory. You need to verify that user 
public html directories on your system are called public_html before
proceeding with this step.  If the user public html are called something
different then use that name instead of public_html.

<P>In the home directory of <CODE>"imswww"</CODE> create the following directory structure
for the HTTPD to access if they don't already exist from a previous 
installation.

<PRE>
      cd ~imswww
</PRE>

<PRE>
      mkdir public_html
</PRE>

<PRE>
      cd ~imswww/public_html
</PRE>

<PRE>
      mkdir cgi-bin
</PRE>

<PRE>
      cd  ~imswww/public_html/cgi-bin
</PRE>

<P>Create links for this installation:

<PRE>
    cd ~imswww
</PRE>

<PRE>
    ln -s imswww-VERSION VERSION
    (For example: ln -s imswww-1.5 1.5)
</PRE>

<PRE>
    cd ~imswww/public_html:
</PRE>

<PRE>
    ln -s ~imswww/imswww-VERSION/docs VERSION 
    (For example:  ln -s ~imswww/imswww-1.5/docs 1.5 ) 
</PRE>

<PRE>
    cd ~imswww/public_html/cgi-bin:
</PRE>

<PRE>
    ln -s ~imswww/imswww-VERSION/cgi-bin VERSION
    (For example: ln -s ~imswww/imswww-1.5/cgi-bin 1.5)
</PRE>
<P><HR>
<A NAME="secn-6.4.7"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 7: Generate and apply the <CODE>SETUP</CODE> file.
</H2></A>
<P>You are now ready to give EOS Data Gateway the information it needs
to <I>install and run</I> the gateway.
From the top-level directory of the distribution, check the <CODE>setup</CODE> utility.
<B>Edit this file and make sure that the Perl path on the second line is correct
for your site.</B> Then, invoke the <CODE>setup</CODE> utility, like so:

<PRE>
    ./setup -make
</PRE>

<P>This will create a file called <CODE>SETUP</CODE> with default values.
<B>Edit this file to make certain it contains the correct information for
your site.</B>
<P><HR ALIGN=LEFT WIDTH=50%>
<A NAME="secn-6.4.7.1"><H3><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Required:
</H3></A>
<P>At a minimum you need to change the following lines to the appropriate values 
for your site (full descriptions of all the values are described
elsewhere in this document):
<DL><P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.3">AdminCrypt</A>
</B>
<DD>The crypted password for the Gateway administrators to use,
exactly as you'd see it in an /etc/passwd file.
This password will be provided by the EOS Data Gateway
administrators.
<I>For example:</I>

<PRE>
       AdminCrypt     "encrypted-pw-provided"
</PRE>
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">The special value "NO PASSWORD" allows ANYONE in!!!
PLEASE, DO NOT USE AN ACTUAL SYSTEM PASSWORD FOR THIS!
</BLOCKQUOTE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.7">CgiUrl</A>
</B>
<DD>Set this to "/ims-bin/VERSION/".  
<I>For example:</I>

<PRE>
       CgiUrl         "/ims-bin/1.5/"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.10">DocsUrl</A>
</B>
<DD>Set this to "/~imswww/VERSION/".
<I>For example:</I>

<PRE>
       DocsUrl        "/~imswww/1.5/"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.12">EcsProfileSmc</A>
</B>
<DD>Set this to "SMC-UPG".
<I>For example:</I>

<PRE>
      EcsProfileSmc   "SMC-UPG" 
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.14">GaeaDataDir</A>
</B>
<DD>Set this to the full path to your valids. This MUST
match the directory you created in Step 3.
<I>For example:</I>

<PRE>
       GaeaDataDir "/home/imswww/support_files/sup_files"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.15">GaeaDistribDir</A>
</B>
<DD>Set this to the full path to your distribution support files.
This MUST match the directory you created in Step 3.

<PRE>
       GaeaDistribDir "/home/imswww/support_files/dist_files"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.23">MorePaths</A>
</B>
<DD>Be sure it includes the location of your <CODE>wais</CODE> software. 
<I>For example:</I>

<PRE>
       MorePaths   "/usr/bsd:/usr/local/bin:/usr/local/wais/bin"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.24">PerlHttpdPort</A>
</B>
<DD>Choose a port on which to run the Perl httpd. 
is recommended that you run the Perl httpd. Running the Perl
httpd will significately speed up the performance of the system,
by eliminating the need to reload the Perl libraries for each
CGI process.  At the current time, we do not recommend running with
PerlHttpdPort set, because we have been having some problems with it.

<PRE>
	PerlHttpdPort "8123"
</PRE>

<P>We recommend setting it to:

<PRE>
        PerlHttpdPort ""
</PRE>
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">Port numbers are very site specific. Check with your system
administrator to get an appropriate port number.
</BLOCKQUOTE>
<P>
<DT><B><A HREF="imsdesign-4-1-5.html#secn-4.1.5.2">HomeEmail</A>
</B>
<DD>Set the e-mail address to where comments are sent.  This should be set
to the Data Center User services group where the machine is hosted.

<P><I>For example:</I>

<PRE>
    HomeEmail  "edc@eos.nasa.gov"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.18">HttpdHost</A>
</B>
<DD>This is the hostname that will be used in URLs pointing back
into the system, and also for email sent to/from this site;
leave it empty ("") for the default hostname.

<P><I>For example:</I>

<PRE>
    HttpdHost "harp.gsfc.nasa.gov"
</PRE>
<P>
<DT><B><b>MaxGransDefault</b>
</B>
<DD>This is the number of granules returned per dataset when a user
issues a query.

<P><I>For example:</I>

<PRE>
    MaxGransDefault  "100"
</PRE>
<P>
<DT><B><b>UseNonSpatial</b>
</B>
<DD>This is a switch <B>(Y or N)</B> used if this installation supports the 
special ODL flag for including non-spatial granules in the results.
If set to <B>Y</B>, a checkbox option will be displayed on the search 
form within the Choose Additional Options, ALL Options section.
The default value is empty string or N.

<P><I>For example:</I>

<PRE>
    UseNonSpatial  "Y"
</PRE>
<P>
<DT><B><b>UseNonTemporal</b>
</B>
<DD>This is a switch <B>(Y or N)</B> used if this installation supports the 
special ODL flag for including non-temporal granules in the results.
If set to <B>Y</B>, a checkbox option will be displayed on the search 
form within the Choose Additional Options, ALL Options section.
The default value is empty string or N.

<P><I>For example:</I>

<PRE>
    UseNonTemporal "Y"
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-4.html#secn-4.1.4.10">SiteAdmin</A>
</B>
<DD>Set the e-mail address to where system error messages 
(<CODE>"dying gasps"</CODE>) and other information is sent.

<P><I>For example:</I>
    SiteAdmin  "imswww"
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.34">SiteName</A>
</B>
<DD>Set the name you wish to use for your installation.

<P><I>For example:</I>

<PRE>
    SiteName  "Goddard Space Flight Center"
</PRE>
</DL>
<P><HR ALIGN=LEFT WIDTH=50%>
<A NAME="secn-6.4.7.2"><H3><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> (Optional) Site Administration :
</H3></A><DL><P>
<DT><B><b>DisableByDiscipline</b>
</B>
<DD>For special case installations of the EDG, non-standard valids may not have
all the information needed to drive the <I>By Discipline</I> feature on the search
form.  For those installations you can disable the <I>By Discipline</I> feature
by setting this flag to "YES". Leave blank to enable <I>By Discipline</I>. 

<P><I>For example:</I>

<PRE>
    DisableByDiscipline "YES" 
</PRE>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.35">SiteSpecDir</A>
</B>
<DD>Specify the directory you will use to hold site specific 
info and documents for the gateway, such as welcome_header.html.

<P><I>For example:</I>
    SiteSpecDir  "/usr/people/imswww/site_specific"
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.28">PolicySecurity</A>
</B>
<DD>Normally set to "US Government" - this will cause a link to be created
on the welcome page to the US Government security policy.  This is
required for all US installations. 

<P>However installations at non-US sites may want to substitute their own 
security policies. In which case, set this to "local".
If you don't want any security policy link on the welcome page then set
it to blank "".
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.27">PolicyPrivacy</A>
</B>
<DD>Normally set to "US Government" - this will cause a link to be created
on the welcome page to the US Government privacy policy.  This is
required for all US installations.

<P>However installations at non-US sites may want to substitute their own
privacy policies. In which case, set this to "local".
If you don't want any privacy policy link on the welcome page then set
it to blank "".
</DL>
<P><HR ALIGN=LEFT WIDTH=50%>
<A NAME="secn-6.4.7.3"><H3><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> XML Guide Search (Spidex) Configuration
</H3></A>
<P>You will need to check the Guide Configuration Page, located at 
<A href="">this URL.</a>

<P>This page specifies the values you'll need to enter for <CODE>SpidexUrl</CODE> and 
<CODE>SpidexConf</CODE>.
<P><HR ALIGN=LEFT WIDTH=50%>
<A NAME="secn-6.4.7.4"><H3><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> (Optional) Persistent User Accounts:
</H3></A>
<P>Beginning with release 2.0, the EOS Data Gateway can be set up so that user
accounts can be established.  These accounts permit a user's session
to be active for an extended period of time.

<P>To enable User Accounts (Persistent User Sessions):
<DL><P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.17">HavePersistentSessions</A>
</B>
<DD>Allow the users to have Persistent directories on the server. The default is "NO", change it to "YES" to enable this option.
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.25">PersistentDir</A>
</B>
<DD>Base location of the Persistent directories , for instance : 

<PRE>
	"/imsdev/persistentUser/"
</PRE>

<P>Please don't have this  directory "tied" to a particular version of the Gateway. We recommand the directory reside under ~imswww/.

<P><B>In most cases, the Web Gateway's defaults can be used for the following :</B>
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.1">AccountMax</A>
</B>
<DD>How much disk space should be allowed for each user account.
This maximum limit should be enough to handle the results of
a large search.  If a user exceeds this size and they are
not signed-in, their results will be purged.  It they are
signed-in they will be warned.  Specify a size with units
of Mega Bytes: e.g., "20mb".  Recommend: "20mb".

<P><I>For example:</I>
    AccountMax  "20mb"
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.2">AllAccountsMax</A>
</B>
<DD>How much disk space should be allowed for ALL user accounts.
This maximum limit should be quite large, since each
account can be typically 1-5 MB (although could be smaller
or bigger).  Specify a size with units of Mega Bytes or
Giga Bytes: e.g., "500mb" or "2gb".  Recommend: "1gb".

<P><I>For example:</I>
    AllAccountsMax  "1gb"
<P>
<DT><B><A HREF="imsdesign-4-1-2.html#secn-4.1.2.8">CriticalAllAccountsMax</A>
</B>
<DD>How much disk space should be allowed for ALL user accounts
before more drastic measures are invoked to clear space.
This maximum limit should be quite large, since each
account can be typically 1-5 MB (although could be smaller
or bigger).  It should generally be larger than AllAccountsMax.
Specify a size with units of Mega Bytes or Giga Bytes:
e.g., "500mb" or "2gb".  Recommend: "2.5gb".

<P><I>For example:</I>
    CriticalAllAccountsMax   "10gb"
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">Again, accounts sizes are very site specific. The size of the accounts
depends on capabilities of the system as well as the usage of the
EOS Data Gateway.
</BLOCKQUOTE>
<P>
<DT><B><B>GuideKillTime</B>
</B>
<DD>Under CRITICAL disk space conditions (account usage
exceedingCriticalAllAccountsMax), if guide search
results are not accessed for this period of time, then
they will be deleted - even from accounts where the user
is signed in.  Specify a time, optional spaces,
and units:  e.g. "5m" for 5 minutes.  Recommend: "15 m".

<P><I>For example:</I>
    GuideKillTime   "15m"
<P>
<DT><B><B>LogoutTime</B>
</B>
<DD>How long should a logged in account be inactive before we log the user out?  
Used by imscleanaccounts.pl. Specify integer time, optional blanks, and units. 
Recommend:  "1 d" for one day.

<P><I>For example:</I>
    LogoutTime "1 d"
<P>
<DT><B><B>ResultsLifetime</B>
</B>
<DD>How long can results be kept in a user account, that is not accessed, before 
they are deleted (to free up disk space and keep info from becoming 
out-of-date)? Used by imscleanaccounts.pl.  Specify integer time, 
optional blanks, and units: e.g., "10d" for 10 days.
Recommend: "14 d" for fourteen days, the valids cycle. 

<P><I>For example:</I>
    ResultsLifetime "14 d"
<P>
<DT><B><B>SecuredDir</B>
</B>
<DD>Location of the secured subdirectory of cgi-bin (for persistent logins).
Defaults to "secured".

<P><I>For example:</I>
 SecuredDir     "secured"
</DL>
<P><HR ALIGN=LEFT WIDTH=50%>
<A NAME="secn-6.4.7.5"><H3><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> (Optional) Detailed Map:
</H3></A>
<P>If you want to enable the more detailed map for the map selection applet,
you must follow the following directions.
<DL><P>
<DT><B><B>MapCgiScript</B>
</B>
<DD>This is the map server script used by the Geo selection java map.
By default this is set to "imswdbtile.cgi" which is a low resolution map
with maximum zoom of 16x (state level) and has the smallest map database.

<P><I>For Example:</I> 

<PRE>
 MapCgiScript "imswdbtile.cgi"
</PRE>

<P>Set to "drawglobe.cgi" for higher resolution maps and more features.

<P><I>For Example:</I>

<PRE>
 MapCgiScript "drawglobe.cgi"
</PRE>

<P>For this option you have a choice of installing one of three resolution levels.
Pick the resolution level by setting the MapResolution.

<P>Possible values for MapResolution are: 
<DL><P>
<DT><B>MEDIUM  
</B>
<DD>Uses the lowres and medres databases (25MB total) and 
allows zooming to 64x (cities and major roads). 
<P>
<DT><B>HIGH  
</B>
<DD>Uses the lowres, medres and highres databases 
(237MB total) and allows zooming to 500x (towns and secondary roads).
<P>
<DT><B>ULTRA 
</B>
<DD>Uses the lowres, medres, highres, and ultrares
databases (1331MB total) and allows zooming to 1000x (neighborhoods and 
residential roads).
</DL>

<P>Here are the directions for installing the map data bases:
<OL><P>
<LI> 
Read the SETUP file and find the location of the support_files directory
as indicated by the setup variable GaeaDistribDir. 
<P>
<LI> 
Switch to the directory of GaeaDistribDir.

<P><I>For example:</I>
cd ~imswww/support_files/dist_files
<P>
<LI> 
ftp lyta.gsfc.nasa.gov

<P>Name: anonymous

<P>Password: your-email-address
<P>
<LI> 
cd outgoing/edg 
<P>
<LI> 
For all resolutions:

<P>get map_symbols.tar.gz

<P>get map.tar.gz
<P>
<LI> 
For HIGH and ULTRA resolution maps:

<P>get highres.tar.gz
<P>
<LI> 
For ULTRA resolution maps:

<P>get ultrares.tar.gz
<P>
<LI> 
quit
<P>
<LI> 
Use "gunzip" or "gzip -d" to uncompress the files:

<P>gunzip map.tar.gz

<P>gunzip map_symbols.tar.gz

<P>gunzip highres.tar.gz

<P>gunzip ultrares.tar.gz
<P>
<LI> 
Untar the files:

<P>tar xvf map.tar

<P>tar xvf map_symbols.tar

<P>Untar highres and ultra database, if needed, in the map directory:

<P>cd map

<P>tar xvf ../highres.tar 

<P>tar xvf ../ultrares.tar 
</OL>
</DL>
<P><HR ALIGN=LEFT WIDTH=50%>
<A NAME="secn-6.4.7.6"><H3><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Apply the SETUP file:
</H3></A>
<P>When you are done editing the SETUP file, save it.
Then, <I>apply</I> the contents of SETUP by running:

<PRE>
    ./setup -apply
</PRE>
<P><HR>
<A NAME="secn-6.4.8"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 8: Transfer the valids.
</H2></A>
<P>Updates to the valids are provided by the EOS Data Gateway Team
every two weeks.  You obtain the latest set of valids by
executing the <CODE>"run_autoxfer.pm"</CODE> script supplied with the web
gateway. <B>Run it now to get the valids:</B>

<PRE>
    ~imswww/imswww-VERSION/lib/perl/run_autoxfer.pm  force
</PRE>

<P>In the step 11 you will set this script up to run each night in a
cron job, to automatically keep your valids up to date.

<P>The command line argument 'force' is new with version 2.0 of
the EOS Data Gateway.  It should be used <B>ONLY</B> during the installation
run and <B>NOT</B> in the cron job.
<P><HR>
<A NAME="secn-6.4.9"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 9: Make valids file for e-mail ordering.
</H2></A>
<P>The wwwvalids.conf file is used by the system for e-mail ordering.
Which data centers and data sets available of e-mail ordering along
with the e-mail address to which send orders are stored here.
The editable text version must be converted into a gdb file for use
by the system. The gdb version of the file must be recreated on each 
system as gdb files have platform dependences in them.

<PRE>
    cd ~imswww/imswww-VERSION/lib/conf
    cp ~imswww/support_files/sup_files/wwwvalids.conf ./
</PRE>

<PRE>
    ../../bin/mkvalids
</PRE>

<P>If wwwuser is set up as a group that is shared with imswww you should do the
following:

<PRE>
    chgrp wwwuser wwwvalids.gdb
    chgrp wwwuser wwwvalids.gdb..LCK
    chmod 664 wwwvalids.gdb
    chmod 664 wwwvalids.gdb..LCK
    chgrp wwwuser misrData.gdb
    chgrp wwwuser misrData.gdb..LCK
    chmod 664 misrData.gdb
    chmod 664 misrData.gdb..LCK
    cd ../..
    chgrp wwwuser log
    chmod 775 log
    chmod 755 src/sf_client/autoxfer
    cd tmp
    chgrp wwwuser imswww-usr
    chmod 775 imswww-usr
</PRE>

<P>If wwwuser is not set up this way you must:

<PRE>
    chmod 666 lib/conf/wwwvalids.gdb
    chmod 666 lib/conf/wwwvalids.gdb..LCK
</PRE>
<P><HR>
<A NAME="secn-6.4.10"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 10 (Optional): Make site specific directory and files.
</H2></A>
<P>To tailor the gateway welcome screen to your site, we have
provided a mechanism for you to do this.

<P>First, create a site specific directory if you don't already
have one. It must have the same name specified in SiteSpecDir
in the SETUP file from Step 7 above.

<PRE>
    mkdir ~imswww/site_specific
</PRE>

<P>You can now create a file in this directory for any text, links,
graphics, or html compatible information that you want to appear
at the top of the Welcome page. The file <B>MUST</B> be called:

<PRE>
    welcome_header.html
</PRE>

<P>You can now create a file in this directory for any text, links,
graphics, or html compatible information that you want to appear
at the bottom of the Welcome page. The file <B>MUST</B> be called:

<PRE>
    welcome_footer.html
</PRE>

<P>If you set one or both of PolicySecurity or PolicyPrivacy to "local"
in your SETUP file, then you need to create a local security policy
file and/or local privacy policy file in your site specific directory.

<P>For PolicyPrivacy = "local" the file <B>Must</B> be called:

<PRE>
    input_privacy.html
</PRE>

<P>For PolicySecurity = "local" the file <B>Must</B> be called:

<PRE>
    input_security.html
</PRE>
<P><HR>
<A NAME="secn-6.4.11"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 11: Set up crontab for imsstats, imscleanup, autoxfer, 
makewelcome, and (optionally) imscleanaccounts.
</H2></A>
<P>The wwwuser and imswww accounts should have cron jobs running to
handle periodic execution of some support scripts.  Check your
unix documentation for the proper use of crontab.

<P><B>Crontab for wwwuser</B>

<P>All actions (events) are logged by the EOS Data Gateway software.
We would appreciate if you could send us a copy of your EOS Data Gateway
logs.  NASA is very interested in knowing how many people are using
the system and what features are being used most often.  The
information in the logs is important to us in helping us build better
future EOS Data Gateways.  Simply add an entry for the program 
<B>imsstats</B> to the <B>crontab</B> for the ~wwwuser account to be run
once a day.

<P>The EOS Data Gateway has an <A HREF="imsdesign-3-3-2.html#idx00053">imscleanup</A> script which should be run
periodically (about every 15 minutes) to clean up cache files 
and stale user sessions. The most reliable way to invoke it, <I>by far</I>, 
is as a <code>cron</code> job.

<P>(Optional)  If your site is set up to have persistent user accounts,
then a separate cleanup script, <A HREF="imsdesign-3-3-2.html#idx00054">imscleanaccounts.pl</A>, should be
run periodically, about once per hour.  Again, it is easiest to do
this in a <code>cron</code> job.

<P>To setup the three scripts to run periodically, login as user
<CODE>"wwwuser"</CODE> and add the <B>imsstats</B> and <B>imscleanup</B> routines
to the crontab. For example:

<PRE>
   # Once a day mail EOS Data Gateway logs to the imswww-stat account at GSFC:
   0 1 * * * /usr/people/imswww/pub/bin/imsstats -cron &gt;/dev/null
</PRE>

<PRE>
   # Cleanup the EOS Data Gateway's session files -- 2.0 area:
   0,15,30,45 * * * * /home/imswww/2.0/lib/bin/imscleanup -cron &gt;/dev/null
   # Cleanup the EOS Data Gateway's session files -- 2.1 area:
   1,16,31,46 * * * * /home/imswww/2.1/lib/bin/imscleanup -cron &gt;/dev/null
</PRE>

<P>Please note that you need to have an entry in the crontab to run 
<B>imscleanup</B> for each of your installations of the web gateway.
As versions of the web gateway are installed or deleted you need 
to add or remove the appropriate crontab entry.  You don't need to
cleanup installations that are not being used.  Only one entry
is needed for <B>imstats</B> as we are only interested in the log
files from whatever is the current public installation.

<P>If you have persistent user accounts in your EOS Data Gateway, then the
cron job should run <B>imscleanaccounts</B> once per hour.  You only
need one of these for the persistent user accounts, even if you
have multiple installations.  The entry in the crontab should
look like this:

<PRE>
   # Once per hour cleanup persistent user accounts.
   2 * * * * /home/imswww/pub/lib/bin/imscleanaccounts.pl -cron &gt;/dev/null
   10 3 * * * /usr/people/imswww/pub/bin/buildBridge &gt;/dev/null
</PRE>

<P><B>Crontab for imswww</B>

<P>The welcome pages contain a "What's New" section which needs to be updated
periodically. To do this, you need to rerun the <CODE>makewelcome</CODE> script. 
This script runs quickly, accessing a Web page from another server and copying
part of its text into the welcome page. We recommend that this be done 
daily; updates are not that frequent, but it is more convenient to run
this script on a daily basis.

<P>To set up the <CODE>makewelcome.pm</CODE> program, log in as user <CODE>"imswww"</CODE> and 
add the routine to the crontab. For example:

<PRE>
    # Get the current "What's New" entries:
    0 4 * * * /usr/people/imswww/pub/lib/perl/makewelcome.pm &gt;/dev/null
</PRE>

<P>The <CODE>"valids"</CODE> you obtained in step 8 are updated by the EOS Data Gateway 
Team every two weeks. To be sure to keep your valids updated, the 
<B>run_autoxfer.pm</B> script should be run periodically. This script runs 
very quickly. It can take less than one second if no new valids are 
available. Therefore, we recommed that you simply add an entry for the 
script <B>run_autoxfer.pm</B> to the <B>crontab</B> for the ~imswww account to 
be run once a day.

<P>To setup the <B>run_autoxfer.pm</B> program, login as user <CODE>"imswww"</CODE> 
and add the routine to the crontab. For example:

<PRE>
   # Get the latest valids for the public installation:
   0 3 * * * /usr/people/imswww/pub/lib/perl/run_autoxfer.pm -cron &gt;/dev/null
</PRE>

<P><B>NOTE:</B>

<P>The cronjob program run_autoxfer copies the wwwvalids.conf 
file included in the valids distribution into the EDG installation. 
However one set of support_files and therefore one run_autoxfer program 
often supports multiple EDG installations, this means that wwwvalids.conf 
only gets updated in the EDG installation which actually ran the transfer.  
Other installations which also use the same support_files are not updated 
with the new wwwvalids.conf.  In the event that an installation is sharing
the valids with another installation, transfer the latest wwwvalids.conf 
file using the following command:

<PRE>
   autowwwvalids -l supportFileDir -t topEDGInstDir
</PRE>

<P>Where <CODE>"autowwwvalids"</CODE> is the script that performs the transfer.  It should 
be located in the /lib/bin directory of the installation.

<P><CODE>"-l" and "-t"</CODE> are command arguments needed by the script.

<P><CODE>"supportFileDir"</CODE> is the absolute path of the support file directory. 

<P><CODE>"topEDGInstDir"</CODE> is the absolute path of the top level directory for 
the installation where the wwwvalids.con file will be copied.

<P>For example:

<PRE>
   # Once a day check/transfer the latest wwwvalids.conf file
   0 2 * * * /usr/people/imswww/pub/lib/bin/autowwwvalids -l /usr/people/imswww/support_files/sup_files -t /usr/people/imswww/pub &gt;/dev/null
</PRE>
<P><HR>
<A NAME="secn-6.4.12"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 12 (Optional): Starting the custom httpd Perl script server.
</H2></A><BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">We do not recommend running with the custom httpd Perl script server at this
time.  
</BLOCKQUOTE>

<P>If you did not set the variable <B>PerlHttpdPort</B> in the setup step
and you wish to run the custom httpd go back to
<A HREF="imsdesign_install.html#secn-6.4.7">Step 7: Generate and apply the SETUP file.</A> and do so. 
If you did not set the variable <B>PerlHttpdPort</B> and do not want
to run the custom httpd you need not do anything.

<P>To reduce the time it takes to run CGI Perl scripts, a custom
httpd server <CODE>imshttpd</CODE> is run.  The Perl server has the 
the Perl modules preloaded, so when a user requests a CGI-generated 
page in the EOS Data Gateway the load time for the Perl
is reduced. Non-CGI pages are served via your systems standard
httpd server.

<P>A <CODE>imshttpd</CODE> is run for each installation of the EOS Data Gateway
on the system. Different versions of the EOS Data Gateway do not
and can not use the same imshttpd server.  Each server needs
its own port number (which was set in the SETUP step).

<P>Each version has its own imshttpd:

<PRE>
     imswww-2.3 on port 8126,
     imswww-2.4 on port 8127.
</PRE>
<BLOCKQUOTE><HR>
<IMG SRC="../icons/warning.gif" ALT="WARNING!">Port numbers are very site specific, we can not tell you what would
be an appropriate port number to use. Port 8123 maybe used by other 
software on your system. Check with your system administrator to
get an appropriate port number.
</BLOCKQUOTE>

<P>To start the imshttpd, login to the account <CODE>"wwwuser"</CODE>.
and execute:

<PRE>
     ~imswww/VERSION/lib/bin/imshttpd
</PRE>

<P>A successfully started imshttpd will end with the message:

<PRE>
     Bottom line: OPERATION SUCCEEDED!
</PRE>

<P>You will want to have your system administrator add the starting
of the imshttpd's to the system init file so that they will
be automatically restarted when the system is rebooted.
<P><HR>
<A NAME="secn-6.4.13"><H2><A HREF="imsdesign_install.html"><IMG SRC="../navigator/up-tiny.gif" ALT="[Top]" BORDER="0"></A> Step 13:  Try out the installation
</H2></A>
<P>Get into your favorite WWW browser, and open the URL:

<PRE>
    http://&lt;your_host_name_here&gt;/~imswww/VERSION/imswelcome
</PRE>

<P><I>For example:</I>

<PRE>
	http://harp.gsfc.nasa.gov/~imswww/1.5/imswelcome
</PRE>

<P>You should see the ``welcome'' page.
<P><HR>
<A HREF="imsdesign.html"><IMG SRC="../navigator/home.gif" ALT="[Home]" BORDER="0"></A>
<A HREF="imsdesign_preflight.html"><IMG SRC="../navigator/prev.gif" ALT="[Prev]" BORDER="0"></A>
<A HREF="imsdesign-6-5.html"><IMG SRC="../navigator/next.gif" ALT="[Next]" BORDER="0"></A>
<A HREF="imsdesign_installchap.html"><IMG SRC="../navigator/up.gif" ALT="[Up]" BORDER="0"></A>
<A HREF="imsdesign_index.html"><IMG SRC="../navigator/index.gif" ALT="[Index]" BORDER="0"></A>&nbsp;&nbsp;&nbsp;
<A HREF="imsdesign_subsys.html"><IMG SRC="../navigator/subsys.gif" ALT="[Subsystems]" BORDER="0"></A>
<A HREF="imsdesign_java.html"><IMG SRC="../navigator/JavaSubSystem.gif" ALT="[Java Subsystems]" BORDER="0"></A>
</BODY></HTML>
